%!TEX root = ../../main.tex

\chapter{Implementierung und Verbesserung der Webseite}
\label{chapter:6}

In den vorherigen Kapiteln wurde zunächst die bisherige Webseite analysiert, um ihre Stärken und Schwächen zu identifizieren. Anschließend wurde eine Nutzerumfrage durchgeführt, um die Zufriedenheit der Nutzer mit der Webseite zu ermitteln. Darauf aufbauend wurden aus den Ergebnissen der Nutzerumfrage Personas erstellt und Anforderungen abgeleitet. Diese Anforderungen wurden im \hyperref[chapter:5]{Kapitel 5} spezifiziert und in die Kategorien Muss-, Soll- und Kann-Anforderungen eingeteilt.

Diese Erkenntnisse sollen nun genutzt werden, um eine verbesserte Version der Webseite zu entwickeln. Bevor dies geschehen kann, muss jedoch die bisherige Codebasis auf ein neues Frontend-Framework migriert werden, da die Zufriedenheit mit dem vorherigen Framework nicht sehr hoch war. Nach der Migration werden trotzdem die Ergebnisse der Nutzerumfrage genutzt, um die Webseite zu optimieren. Dabei wird auf die Ergebnisse der Umfrage eingegangen, und die Webseite wird entsprechend angepasst, um die Nutzererfahrung zu verbessern. Außerdem werden neue Features und Funktionen hinzugefügt, die die Nutzererfahrung bereichern und die Nutzer dazu anregen sollen, die Webseite vermehrt zu nutzen.

Bei jedem Relevanten Kapitel werden die entsprechenden Anforderungen welche dadurch Erfüllt werden referenziert. Dadurch das aber manche Anforderungen keine explizite Umsetzung erfordern bzw halt bei der kompletten Umsetzung beachtet werden sollen sind diese implizit von Anfang an zu beachten und sind bei allen anderen Aufgaben im Hinterkopf. Folgende Anforderungen werden konstant beachtet und angewendet.

\begin{enumerate}

    \item \textbf{[R08] Integration von Grafiken}
    \item \textbf{[R10] Modernisierung des Designs}
    \item \textbf{[R12] Benutzerfreundlichkeit}
    \item \textbf{[R13] Modernes Design}
    \item \textbf{[R14] Zuverlässigkeit}
    \item \textbf{[R15] Wartbarkeit und Erweiterbarkeit}
    \item \textbf{[R16] Code Qualität und Styleguide Einhaltung}

\end{enumerate}


\section{Frameworkwechsel und Verbesserungen}

\subsection{Motivation für den Frameworkwechsel}

Die Webseite wurde bisher unter Verwendung des Frontend-Frameworks \textbf{React.js} entwickelt, das aufgrund seiner Beliebtheit bei vielen Entwicklern weit verbreitet ist. Dennoch wurde die Entscheidung getroffen, das Framework zu wechseln, bedingt durch verschiedene Herausforderungen und auch aufgrund von Kompetenzüberlegungen der Entwickler. Durch den Übergang zu einem anderen Framework soll die Webentwicklung vereinfacht und die Nutzererfahrung verbessert werden. Insbesondere sollen bekannte Probleme wie fehlerhaftes State Management vermieden werden.

Wie bereits im \hyperref[chapter:3-frontend-frameworks]{Grundlagenkapitel} erläutert, wird als neue Framework \textbf{Vue} eingeführt, dass ebenfalls weit verbreitet ist und von vielen Entwicklern genutzt wird.

\subsection{Umsetzung des Frameworkwechsels}

Die Umsetzung ist dabei zunächst nicht zu kompliziert, da das gesamte Projekt in verschiedene Teile unterteilt war, wie das Frontend der Webseite, das Backend und die Datenbank. Somit musste lediglich der Ordner, der das Frontend beinhaltet, ausgetauscht werden. Das Backend und die Datenbank blieben unverändert. Um das Frontend dann mit dem neuen Framework (\textbf{Vue}) auszustatten, muss zunächst der Inhalt des bisherigen Ordners, der das Frontend beinhaltet, gelöscht werden. Daraufhin konnte über das Werkzeug \textbf{Vite} ein \textbf{Vue}-Projekt erstellt werden, das auch direkt \textbf{TypeScript} unterstützt. Dies hilft beim Entwickeln, schon frühzeitig Probleme zu entdecken und zu lösen. Im folgenden Code-Snippet ist zu sehen, wie das Projekt mit \textbf{Vite} erstellt wurde.

\begin{lstlisting}[language={bash}, caption={Initialisierung des Vue Projektes mit Vite \cite{vitejs-getting-started}}]
npm create vite@latest
\end{lstlisting}

Nachdem das Projekt erstellt wurde, konnte der Inhalt des Projekts in den alten und leeren Ordner kopiert werden. Danach mussten lediglich noch Konfigurationen angepasst werden, ebenso wie Dockerfiles und Docker Compose. Die Konfigurationen betreffen das \textbf{TypeScript}- und \textbf{Vue}-Projekt, während die Dockerfiles und Docker Compose für die Containerisierung der Webseite zuständig sind. Die entsprechenden Konfigurationen und Dockerfiles sind im folgenden Code Snippet zu sehen.

\begin{lstlisting}[language={bash}, caption={Dockerfile für das Vue Projekt}]
# Use the official Node.js image as the base image
FROM node:16

# Set the working directory inside the container
WORKDIR /usr/src/app

# Copy only the package.json and package-lock.json files to leverage Docker cache
COPY package.json ./
COPY package-lock.json ./

# Install dependencies
RUN npm install

# Copy the entire project files to the container
COPY ./ ./

# Expose the port that the Vue app will run on (change this if your app uses a different port)
EXPOSE 3000

# Build the Vue project
RUN npm run build

# Command to start the Vue app
CMD ["npm", "run", "start"]
\end{lstlisting}

In der Docker Compose-Datei wird der Container für das Vue-Projekt erstellt und konfiguriert. Hierbei muss dann noch explizit der Port angegeben werden, auf dem die Webseite laufen soll.

\begin{lstlisting}[language={bash}, caption={Docker Compose für das Vue Projekt}]
version: "3.8"

client:
stdin_open: true
environment:
    - WDS_SOCKET_PORT=3050
    - CHOKIDAR_USEPOLLING=true
    - WATCHPACK_POLLING=true
build:
    dockerfile: Dockerfile
    context: ./client
volumes:
    - /app/node_modules
    - ./client:/app
ports:
    - "3000:3000"
\end{lstlisting}

Das alles funktioniert reibungslos. Außerdem muss in der \texttt{vite.config.ts}-Datei noch der Port angepasst werden, auf dem die Webseite laufen soll. Dieser muss mit dem Port in der Docker-Compose-Datei übereinstimmen.

\begin{lstlisting}[language={JavaScript}, caption={Port Konfiguration für das Vue Projekt}]
export default defineConfig({
    ...
    server: {
    host: '0.0.0.0',
    port: 3000,
},
});
\end{lstlisting}

Nach diesem Schritt ist das Projekt erfolgreich migriert und kann nun mit dem neuen Framework weiterentwickelt werden. Es ist auch möglich, alles über die Docker Compose Datei zu starten und zu stoppen.

\section{Unterstützung von PWA für Mobile Nutzer}

Zu Beginn dieser Arbeit wurde im \hyperref[chapter:2]{Kapitel 2} erwähnt, dass die Webseite trotz ihrer Web-basierten Natur als "App" bezeichnet wird. Um die Nutzererfahrung zu optimieren und die Benutzerfreundlichkeit der Webseite zu erhöhen, wird die Integration von \acf{PWA} angestrebt. Eine \acs{PWA} ist eine Technologie, die es ermöglicht, Webseiten ähnlich wie native Mobile Apps zu nutzen. Dies bedeutet, dass die Webseite auch offline zugänglich ist und auf dem Startbildschirm eines Smartphones installiert werden kann. Dadurch wird die Interaktion mit der Webseite komfortabler und die Nutzererfahrung insgesamt verbessert. \cite{ms-pwa}

Die Implementierung von \acs{PWA} gestaltet sich vergleichsweise unkompliziert und erfordert nur wenige Schritte. Zunächst wird ein Plugin zu Vite hinzugefügt, das sich um die \acs{PWA}-Funktionalität kümmert. Dies kann einfach über die Konsole durch die Installation des entsprechenden Plugins erfolgen.

\begin{lstlisting}[language={bash}, caption={Installation des PWA Plugins}]
npm i vite-plugin-pwa -D 
\end{lstlisting}

Danach müssen wir die Vite-Konfiguration anpassen, um das Plugin zu aktivieren und zu konfigurieren. Dies umfasst das Hinzufügen eines Manifests, eines Service Workers sowie verschiedener Grafiken für mobile Geräte. Im folgenden Code-Snippet wird dargestellt, wie die Vite-Konfiguration angepasst wurde, um die Unterstützung für \acs{PWA} zu integrieren.

\begin{lstlisting}[language={JavaScript}, caption={Angepasste Vite Konfiguration für PWA}]
...
import { VitePWA } from 'vite-plugin-pwa';

export default defineConfig({
    plugins: [
        ...
        VitePWA({
            registerType: 'autoUpdate',
            devOptions: {
                enabled: true,
            },
            includeAssets: [
                'favicon.ico',
                'apple-touch-icon.png',
                'mask-icon.svg',
            ],
            manifest: {
                name: 'CO2Runter',
                short_name: 'CO2Runter',
                description:
                    'CO2 Runter Webseite hilft bei der Reduktion von CO2',
                theme_color: '#ffffff',
                icons: [
                    {
                        src: '/pwa-192x192.png',
                        sizes: '192x192',
                        type: 'image/png',
                    },
                    {
                        src: '/pwa-512x512.png',
                        sizes: '512x512',
                        type: 'image/png',
                    },
                    {
                        src: '/pwa-512x512.png',
                        sizes: '512x512',
                        type: 'image/png',
                        purpose: 'any maskable',
                    },
                ],
            },
        }),
    ],
    ...
});
\end{lstlisting}

Ebenfalls erfordert es die Anpassung der \texttt{index.html}-Datei, um die im Manifest definierten Grafiken zu laden.

\begin{lstlisting}[language={JavaScript}, caption={Anpassungen an der index.html Datei}]
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>CO2 Runter</title>
    <meta name="description" content="CO2 Runter Webseite hilft bei der Reduktion von CO2">

    <link rel="icon" href="/favicon.ico">
    <link rel="apple-touch-icon" href="/apple-touch-icon.png" sizes="180x180">
    <link rel="mask-icon" href="/mask-icon.svg" color="#FFFFFF">
    <meta name="theme-color" content="#ffffff">
</head>

<body>
    <div id="app"></div>
    <script type="module" src="/src/main.ts"></script>
</body>

</html>
\end{lstlisting}

Das Manifest ist eine JSON-Datei, die im Hintergrund von Vite generiert wird und Informationen über die Webseite enthält, wie den Namen, die Beschreibung, das Icon und die Farbe. Der Service Worker ist ein Skript, das im Hintergrund ausgeführt wird und die Offline-Funktionalität der App ermöglicht. Nun ist die Webseite als \acs{PWA} konfiguriert und kann auf dem Homescreen des Smartphones installiert werden. Um dies zu erleichtern, kann eine Komponente erstellt werden, die den Nutzer dazu auffordert, die Webseite zu installieren. Diese könnte wie folgt aussehen:

\begin{lstlisting}[language={JavaScript}, caption={PWA Vue Komponente}]
<script setup lang="ts">
import { onBeforeMount, ref } from 'vue';

const deferredPrompt = ref<any>(null);

const beforeInstallPromptHandler = (e: Event) => {
    e.preventDefault();
    deferredPrompt.value = e;
};

const appInstalledHandler = () => {
    deferredPrompt.value = null;
};

onBeforeMount(() => {
    window.addEventListener('beforeinstallprompt', beforeInstallPromptHandler);
    window.addEventListener('appinstalled', appInstalledHandler);
});

const dismiss = () => {
    deferredPrompt.value = null;
};

const install = () => {
    if (deferredPrompt.value) {
        deferredPrompt.value.prompt();
    }
};
</script>

<template>
    <v-alert
        v-if="deferredPrompt"
        icon="mdi-download"
        color="info"
        title="Alert title"
        text="Lorem ipsum dolor sit amet consectetur adipisicing elit. Commodi, ratione debitis quis est labore voluptatibus! Eaque cupiditate minima, at placeat totam, magni doloremque veniam neque porro libero rerum unde voluptatem!"
    >
        <br />
        <v-btn @click="dismiss">Dismiss</v-btn>
        <v-btn @click="install">Install</v-btn>
    </v-alert>

    <v-banner
        v-if="deferredPrompt"
        lines="one"
        icon="mdi-download"
        color="info"
    >
        <template v-slot:text>
            Willst du diese Webseite installieren?
        </template>

        <template v-slot:actions>
            <v-btn @click="dismiss">Nein</v-btn>
            <v-btn @click="install">Ja, installieren</v-btn>
        </template>
    </v-banner>
</template>

\end{lstlisting}

Die Integration dieser Komponente in die \texttt{App.vue}-Datei ist unkompliziert und wird dem Nutzer angezeigt, wenn die Webseite als \acs{PWA} installiert werden kann. Dadurch wird die Nutzererfahrung verbessert und die Webseite kann auch offline genutzt werden, ähnlich wie eine native App. \cite{vite-plugin-pwa}

\section{Projekt aufräumen und Strukturierung}

Bisher wurden essentielle veränderungen an dem Framework gemacht, bevor es weitergeht, muss das Projekt aufgeräumt und strukturiert werden. Dies beinhaltet das Entfernen von ungenutzten Dateien und das Umbenennen von Dateien, um eine konsistente Namenskonvention zu gewährleisten. Außerdem müssen die Ordnerstruktur und die Dateistruktur überarbeitet werden, um eine bessere Übersichtlichkeit und Wartbarkeit des Projekts zu gewährleisten. Dies beinhaltet das Erstellen von Ordnern für Komponenten, Seiten, Services und anderen wichtigen Dateien. Die Ordnerstruktur könnte wie folgt aussehen:

\section{Erstellung der neuen Landing Page}

Die Landing Page ist die erste Seite, die der Nutzer sieht, wenn er die Webseite besucht. Sie ist somit das Aushängeschild der Webseite und sollte den Nutzer dazu animieren, die Webseite zu nutzen. Die Landing Page sollte also ansprechend und informativ sein, um den Nutzer zu überzeugen, die Webseite zu nutzen als auch die zuvor definierte Anforderung \textbf{[R04]} erfüllen. Die neue Landing Page wird mit \textbf{Vuetify} erstellt, einem Material Design Framework für Vue.js. Vuetify bietet viele vorgefertigte Komponenten, die es ermöglichen, schnell und einfach ansprechende Webseiten zu erstellen. Die Landing Page könnte wie folgt aussehen:

\begin{figure}[h]
    \centering
    \includegraphics[width=0.8\textwidth]{images/06/HomePage-Design.jpeg}
    \caption{Das neu erstelle CO2Runter Design der Landigpage anhand der Nutzerzentrierten Umfrage}
    \label{fig:new-co2runter-homepage-design}
\end{figure}

Das Design welches in \hyperref[fig:new-co2runter-homepage-design]{vorheriger Abbildung} zu sehen war wurde anhand der evaluierung der Umfrage und der erstellten Personas erstellt. Dafür wurde das Tool Figma genutzt und auch direkt Vuetify Komponenten, wodurch die Entwicklungsarbeitszeit immense verkürzt wurde weil man sich eins zu eins an das Design halten konnte.

Für die neue Homepage konnte man diese in drei Sektionen unterteilen. Einmal die Navigationsleiste, den Kontent der Landing Page und dann der Footer mit relevanten Informationen. Zu beachten ist hierbei das die Navigationsleiste als auch der Footer auf allen Seiten Identisch sein sollen, nur der Kontent ist der Part wo auf den unterschiedlihen Seiten anderst ist. Daher werden die drei Sektionen im folgenden nacheinander durchgearbeitet. Zuvor aber werden wichtige änderungen vorgenommen.

\subsection{Änderungen}

Eine wichtige Änderung ist die Anpassung des Farbschemas, um die Webseite ansprechender zu gestalten. Dafür wird das Farbschema von Vuetify angepasst, um eine konsistente Farbgebung zu gewährleisten. Hierfür erstellen wir lediglich nach der Vuetify dokumentation ein neues Farbschema und passen die Farben an. Dieses Farbschema wird dann in der Vuetify Konfiguration eingebunden. Das Farbschema sieht dann wie folgt aus: \cite{vuetiy-custom-color-theme}

\begin{lstlisting}[language={JavaScript}, caption={Vuetify Farbschema anpassung}]
    const customLightTheme = {
        dark: false,
        colors: {
            background: '#FFFFFF',
            surface: '#FFFFFF',
            'surface-bright': '#FFFFFF',
            'surface-light': '#EEEEEE',
            'surface-variant': '#424242',
            'on-surface-variant': '#EEEEEE',
            primary: '#D0ECDE',
            'primary-darken-1': '#01502D',
            secondary: '#004725',
            'secondary-darken-1': '#018786',
            error: '#B00020',
            info: '#2196F3',
            success: '#4CAF50',
            warning: '#FB8C00',
        },
        variables: {
            'border-color': '#000000',
            'border-opacity': 0.12,
            'high-emphasis-opacity': 0.87,
            'medium-emphasis-opacity': 0.6,
            'disabled-opacity': 0.38,
            'idle-opacity': 0.04,
            'hover-opacity': 0.04,
            'focus-opacity': 0.12,
            'selected-opacity': 0.08,
            'activated-opacity': 0.12,
            'pressed-opacity': 0.12,
            'dragged-opacity': 0.08,
            'theme-kbd': '#212529',
            'theme-on-kbd': '#FFFFFF',
            'theme-code': '#F5F5F5',
            'theme-on-code': '#000000',
        },
    };
    export default createVuetify({
        theme: {
            defaultTheme: 'customLightTheme',
            themes: {
                customLightTheme,
            },
        },
    });
\end{lstlisting}

Nicht nur die Farben sonder auch das Layout sollte angepasst werden. Dafür wird ein Layout erstellt welches auf allen Seiten gleich ist und nur der Kontent sich ändert. Dieses Layout wird dann in jeder Seite eingebunden durch die Vue Router Funktionalität das diese Seite folgende Komponente Nutzt und dann den Kontent der jeweiligen Seite einbindet. Das einbinden sieht wie folgt aus:

\begin{lstlisting}[language={JavaScript}, caption={Einbindung des Layouts in der Vue Router Konfiguration}]
    const routes = [
        {
            path: '/',
            component: () => import('@/layouts/default/Default.vue'),
            children: [
                {
                    path: '',
                    name: 'Home',
                    component: () => import('@/views/HomeView.vue'),
                },
            ],
        },
        ...
    ];
\end{lstlisting}

Und das dies so funktioniert muss in der \texttt{Default.vue} Datei mindestes ein \texttt{<router-view />} Tag eingebunden werden, damit die jeweilige Seite eingebunden wird und angezeigt. Das angepasste Layout der CO2Runter Webseite beinhaltet das auf jeder seite die Navigationsleiste, der Kontent und der Footer angezeigt wird. Dieses Layout wird dann in der \texttt{App.vue} Datei wiederum über ein \texttt{<router-view />} Tag eingebunden und sieht wie folgt aus:

\begin{lstlisting}[language={JavaScript}, caption={Layout Definition}]
    <template>
    <v-locale-provider>
        <v-app>
            <TheNavigationHeader />
            <v-main>
                <v-divider />
                <v-container :fluid="true" class="page-wrapper">
                    <div class="maxWidth">
                        <RouterView />
                    </div>
                </v-container>
            </v-main>
            <TheFooter />
        </v-app>
    </v-locale-provider>
</template>

<script lang="ts" setup>
import TheNavigationHeader from '@/components/TheNavigationHeader.vue';
import TheFooter from '@/components/TheFooter.vue';
</script>

<style scoped>
.page-wrapper {
    padding: 24px;
    padding-bottom: 30px;

    @media screen and (max-width: 600px) {
        padding: 10px;
    }
}

.maxWidth {
    max-width: 1000px;
    margin: 0 auto;
}
</style>
\end{lstlisting}


Nachdem diese schritte befogt wurden und jede Seite das Layout eingebunden hat, als auch das Farbschema passet zu der Webseite angepasst wurde, kann sich nun um die restliche Komponenten gekümmert werden welche zuvor erwähnt wurde, die Navigationsleiste, der Kontent und der Footer.

\subsection{Navigationsleiste}

Navigationsleiste als auch Drawer und das Mobil freundlich machen, weil man die Webseite auch als Mobile PWA App Installieren kann und das den Nutzer bei der Benutzung hilft.

% TODO: Snippet anpassen!
\begin{lstlisting}[language={JavaScript}, caption={Navigation Definition}]
    <template>
    <v-app-bar :elevation="0">
        <v-app-bar-nav-icon
            class="hidden-md-and-up ms-md-3 ms-sm-5 ms-3 text-muted"
            @click.capture="isDrawerOpen = !isDrawerOpen"
        ></v-app-bar-nav-icon>

        <v-toolbar-title>
            <v-list class="d-flex">
                <v-list-item
                    to="/"
                    :exact="true"
                    title="CO2Runter"
                    class="rounded-lg"
                    prepend-avatar="../assets/co2runter-logo.png"
                    color="primary-darken-1"
                />
            </v-list>
        </v-toolbar-title>

        <div class="hidden-sm-and-down">
            <v-list class="d-flex">
                <v-list-item
                    to="/co2Rechner"
                    title="CO2 Rechner"
                    prepend-icon="mdi-calculator-variant-outline"
                    class="mx-1 rounded-lg"
                    color="primary-darken-1"
                />

                <v-list-item
                    to="/dashboard"
                    title="Dashboard"
                    prepend-icon="mdi-view-dashboard-outline"
                    class="mx-1 rounded-lg"
                    color="primary-darken-1"
                />

                <v-list-item
                    to="/faq"
                    title="FAQ"
                    prepend-icon="mdi-frequently-asked-questions"
                    class="mx-1 rounded-lg"
                    color="primary-darken-1"
                />

                <v-list-item
                    to="/gruppensystem"
                    :exact="true"
                    title="Gruppensystem"
                    prepend-icon="mdi-account-group-outline"
                    class="mx-1 rounded-lg"
                    color="primary-darken-1"
                />

                <v-list-item
                    v-if="!isLoggedIn"
                    to="/login-registration"
                    :exact="true"
                    title="Login"
                    prepend-icon="mdi-login-variant"
                    class="rounded-lg mx-1 mr-3"
                    color="primary-darken-1"
                    :active="true"
                />

                <v-menu v-else :close-on-content-click="false">
                    <template v-slot:activator="{ props }">
                        <v-list-item
                            v-bind="props"
                            class="rounded-lg mx-1 mr-3"
                            color="primary-darken-1"
                            :active="true"
                        >
                            <template v-slot:prepend>
                                <v-icon>mdi-account</v-icon>
                            </template>

                            <v-list-item-title>Konto </v-list-item-title>

                            <template v-slot:append>
                                <v-icon>mdi-unfold-more-horizontal</v-icon>
                            </template>
                        </v-list-item>
                    </template>

                    <v-sheet rounded="lg" elevation="10" class="mt-2">
                        <v-list class="pa-4">
                            <v-list-subheader>Konto Aktionen </v-list-subheader>

                            <v-list-item
                                title="Gruppen Infos"
                                prepend-icon="mdi-information-outline"
                                class="mb-1 rounded-lg"
                                color="primary-darken-1"
                                to="/gruppensystem/gruppen-informationen"
                            />

                            <v-list-item
                                title="Logout"
                                prepend-icon="mdi-logout"
                                class="mb-1 rounded-lg"
                                color="primary-darken-1"
                                @click="logout()"
                            />
                        </v-list>
                    </v-sheet>
                </v-menu>
            </v-list>
        </div>
    </v-app-bar>

    <v-navigation-drawer v-model="isDrawerOpen" class="hidden-md-and-up">
        <v-divider />

        <v-list class="pa-4">
            <v-list-subheader>Navigation</v-list-subheader>

            <v-list-item
                to="/co2Rechner"
                title="CO2 Rechner"
                prepend-icon="mdi-calculator-variant-outline"
                class="mb-1 rounded-lg"
                color="primary-darken-1"
            />

            <v-list-item
                to="/dashboard"
                title="Dashboard"
                prepend-icon="mdi-view-dashboard-outline"
                class="mb-1 rounded-lg"
                color="primary-darken-1"
            />

            <v-list-item
                to="/faq"
                title="FAQ"
                prepend-icon="mdi-frequently-asked-questions"
                class="mb-1 rounded-lg"
                color="primary-darken-1"
            />

            <v-list-item
                to="/gruppensystem"
                :exact="true"
                title="Gruppensysten"
                prepend-icon="mdi-account-group-outline"
                class="mb-1 rounded-lg"
                color="primary-darken-1"
            />

            <v-list-item
                v-if="!isLoggedIn"
                to="/login-registration"
                :exact="true"
                title="Login"
                prepend-icon="mdi-login-variant"
                class="mb-1 rounded-lg"
                color="primary-darken-1"
                :active="true"
            />

            <v-menu v-else :close-on-content-click="false">
                <template v-slot:activator="{ props }">
                    <v-list-item
                        v-bind="props"
                        class="rounded-lg"
                        color="primary-darken-1"
                        :active="true"
                    >
                        <template v-slot:prepend>
                            <v-icon>mdi-account</v-icon>
                        </template>

                        <v-list-item-title>Konto </v-list-item-title>

                        <template v-slot:append>
                            <v-icon>mdi-unfold-more-horizontal</v-icon>
                        </template>
                    </v-list-item>
                </template>

                <v-sheet rounded="lg" elevation="10" class="mt-2">
                    <v-list class="pa-4">
                        <v-list-subheader>Konto Aktionen </v-list-subheader>

                        <v-list-item
                            title="Gruppen Infos"
                            prepend-icon="mdi-information-outline"
                            class="mb-1 rounded-lg"
                            color="primary-darken-1"
                            to="/gruppensystem/gruppen-informationen"
                        />

                        <v-list-item
                            title="Logout"
                            prepend-icon="mdi-logout"
                            class="mb-1 rounded-lg"
                            color="primary-darken-1"
                            @click="logout()"
                        />
                    </v-list>
                </v-sheet>
            </v-menu>
        </v-list>
    </v-navigation-drawer>

    <PWAInstallationDialog />
</template>

<script setup lang="ts">
import { ref, watch } from 'vue';
import useAuth from '@/composables/useAuth';
import PWAInstallationDialog from '@/components/PWAInstallationDialog.vue';

// Use the composable
const { isLoggedIn, logout } = useAuth();

// Your remaining code stays the same
const isDrawerOpen = ref(false);

watch(isDrawerOpen, (newValue) => {
    if (newValue) {
        document.body.style.overflow = 'hidden';
    } else {
        document.body.style.overflow = 'visible';
    }
});
</script>

<style scoped></style>
\end{lstlisting}

\subsection{Footer}

Um den Footer zu erzeugen gibt es drei bereiche. Einmal die Logos der Partner, dann die rechtlichen Informationen und die technischen Informationen und an Ende der Copyright.

% TODO: Snippet anpassen!
\begin{lstlisting}[language={JavaScript}, caption={Footer Definition}]
    <template>
    <v-divider />

    <div class="">
        <div class="d-flex justify-center align-center mt-16">
            <h1 class="text-primary-darken-1">Erstellt in Kollaboration</h1>
        </div>

        <v-container class="my-16">
            <v-row
                class="d-flex flex-column flex-md-row justify-center align-center"
                align-content="center"
                :no-gutters="true"
            >
                <v-col class="d-flex justify-center mb-3 mb-md-0">
                    <v-img
                        height="60px"
                        class="clickable-image"
                        src="../../public/images/Logos/Stadtkarlsruhe-logo.svg"
                        @click="navigate('https://www.karlsruhe.de/')"
                    />
                </v-col>
                <v-col class="d-flex justify-center mb-3 mb-md-0">
                    <v-img
                        height="120px"
                        class="clickable-image"
                        src="../../public/images/Logos/CodeFor-karlsruhe.svg"
                        @click="navigate('https://ok-lab-karlsruhe.de/')"
                    />
                </v-col>
                <v-col class="d-flex justify-center">
                    <v-img
                        height="60px"
                        class="clickable-image"
                        src="../../public/images/Logos/dhbw-logo.svg"
                        @click="
                            navigate(
                                'https://www.karlsruhe.dhbw.de/startseite.html'
                            )
                        "
                    />
                </v-col>
            </v-row>
        </v-container>

        <v-divider />

        <v-container class="my-16">
            <v-row justify="center">
                <v-col cols="12" md="4" order-md="1">
                    <v-list class="d-flex">
                        <v-list-item
                            to="/"
                            :exact="true"
                            title="CO2Runter"
                            class="rounded-lg"
                            prepend-avatar="../../public/apple-touch-icon.png"
                            color="primary-darken-1"
                        />
                    </v-list>
                </v-col>
                <v-col cols="12" md="4" order-md="2">
                    <v-list class="pa-4">
                        <v-list-subheader
                            >Rechtliche Informationen
                        </v-list-subheader>

                        <v-list-item
                            href="https://www.karlsruhe.de/datenschutz"
                            title="Datenschutz"
                            prepend-icon="mdi-shield-account-outline"
                            class="mb-1 rounded-lg"
                            color="primary-darken-1"
                        />

                        <v-list-item
                            href="https://www.karlsruhe.de/impressum"
                            title="Impressum"
                            prepend-icon="mdi-text-box-outline"
                            class="mb-1 rounded-lg"
                            color="primary-darken-1"
                        />
                    </v-list>
                </v-col>
                <v-col cols="12" md="4" order-md="2">
                    <v-list class="pa-4">
                        <v-list-subheader
                            >Technische Informationen
                        </v-list-subheader>

                        <v-list-item
                            href="https://github.com/stadt-karlsruhe/CO2-Runter"
                            title="Quelltext"
                            prepend-icon="mdi-file-code-outline"
                            class="mb-1 rounded-lg"
                            color="primary-darken-1"
                        />
                    </v-list>
                </v-col>
            </v-row>
        </v-container>
    </div>

    <v-footer
        class="text-center d-flex justify-center align-center"
        color="primary"
    >
        <div class="text-primary-darken-1">
            2023 - heute | CO2Runter. Alle Rechte vorbehalten.
        </div>
    </v-footer>
</template>

<script setup lang="ts">
const navigate = (link: string) => {
    window.open(link, '_blank');
};
</script>

<style scoped>
.clickable-image {
    cursor: pointer;
    transition: transform 0.15s ease-in-out;
}

.clickable-image:hover {
    transform: scale(1.05);
}
</style>
\end{lstlisting}

\subsection{Kontent}

Wie wir den Kontent so Anordnen mit den Karten und dann auch mit Mediaqueries ausbauen

Hier kann man eine Karte einfach zeigen und dann einfach sagen das man die Rows changen kann so auch nix großes.

% TODO: Snippet anpassen!
\begin{lstlisting}[language={JavaScript}, caption={Home Page Kontent}]
    <template>
    <v-container justify="center">
        <v-row class="d-flex flex-column-reverse flex-md-row my-16">
            <v-col cols="12" md="7" class="text-center text-md-start">
                <h1 class="text-primary-darken-1">657,000,000 Tonnen</h1>
                <p class="text-secondary my-8">
                    Text1
                </p>
                <v-btn
                    variant="tonal"
                    :rounded="true"
                    color="primary-darken-1"
                    append-icon="mdi-chevron-right"
                    size="large"
                >
                    Aktion 1
                </v-btn>
            </v-col>
            <v-col class="d-flex align-center justify-center" cols="12" md="5">
                <v-img
                    width="360px"
                    height="200px"
                    src="../assets/undraw_nature_m5ll.svg"
                />
            </v-col>
        </v-row>

        <v-row class="d-flex flex-column flex-md-row my-16">
            <v-col class="d-flex align-center justify-center" cols="12" md="5">
                <v-img
                    width="360px"
                    height="200px"
                    src="../assets/undraw_environment_iaus.svg"
                />
            </v-col>
            <v-col cols="12" md="7" class="text-center text-md-start">
                <h1 class="text-primary-darken-1">Sie sind dran</h1>
                <p class="text-secondary my-8">
                    Text 2
                </p>
                <v-btn
                    variant="tonal"
                    :rounded="true"
                    color="primary-darken-1"
                    append-icon="mdi-chevron-right"
                    size="large"
                >
                    Aktion 2
                </v-btn>
            </v-col>
        </v-row>

        <v-row class="d-flex flex-column-reverse flex-md-row my-16">
            <v-col cols="12" md="7" class="text-center text-md-start">
                <h1 class="text-primary-darken-1">Sie sind dran</h1>
                <p class="text-secondary my-8">
                    Text 3
                </p>
                <v-btn
                    variant="tonal"
                    :rounded="true"
                    color="primary-darken-1"
                    append-icon="mdi-chevron-right"
                    size="large"
                >
                    Aktion 3
                </v-btn>
            </v-col>
            <v-col class="d-flex align-center justify-center" cols="12" md="5">
                <v-img
                    width="360px"
                    height="200px"
                    src="../assets/undraw_waiting__for_you_ldha.svg"
                />
            </v-col>
        </v-row>
    </v-container>
</template>

<script lang="ts" setup></script>

<style scoped></style>

\end{lstlisting}

\section{Der neue CO2 Rechner}

% TODO: Anforderung [R05] umsetzen
% TODO: Anforderung [R07] umsetzen
% TODO: Anforderung [R09] umsetzen
% TODO: Anforderung [R11] umsetzen
% TODO: Anforderung [R06] umsetzen
% TODO: Anforderung [R03] umsetzen
% TODO: Anforderung [R02] umsetzen
% TODO: Anforderung [R01] umsetzen

\section{Das neue Dashboard}

% TODO: Anforderung [R01] umsetzen
% TODO: Anforderung [R05] umsetzen

\section{Anreize zur Aktivität und Engagement der Nutzer}

% TODO: brauchen wir diesen Abschnitt oder soll der wo anderst hin?

Sollen durch das neue design, neue Homepage angeregt werden und durch die neuen Funktionen wie den CO2 Rechner und das Dashboard dazu animiert werden sich zu registrieren und aktiv zu werden. Dies soll durch die Umfrage und die erstellten Personas erreicht werden. Die Personas haben gezeigt das die Nutzer sich mehr Anreize wünschen um aktiv zu werden und sich zu registrieren. Dies soll durch die neuen Funktionen und das neue Design erreicht werden.
